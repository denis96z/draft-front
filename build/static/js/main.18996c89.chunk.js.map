{"version":3,"sources":["store/store.ts","util.tsx","ui/Layout/Header.tsx","ui/Layout/LeftMenu.tsx","ui/Status/Status.tsx","rpc.ts","ui/CodeHighlight/CodeHighlight.tsx","ui/Endpoint/EndpointCase.tsx","ui/Endpoint/Endpoint.tsx","ui/Endpoint/EndpointAll.tsx","ui/Layout/Layout.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["Store","createContext","useAppStore","useContext","getProjectEntryKey","entry","key","name","scheme","project","useNav","updateState","React","val","window","location","hash","fuzzyMemo","fuzzyHL","value","pattern","fuzzyMatch","pre","post","result","dangerouslySetInnerHTML","__html","rendered","getBaseURL","id","getCaseURL","c","parseHistoryParams","sitemap","match","endpoint","queryString","activeProject","find","p","activeEndpoint","Header","state","search","handleSearch","evt","target","nav","className","Sider","width","Logo","Content","theme","mode","defaultSelectedKeys","map","Item","onClick","Search","placeholder","onChange","height","src","LeftMenu","handleSelect","param","rootEntries","entries","flatMap","r","openKeys","menuItems","render","e","type","push","SubMenu","title","description","defaultOpenKeys","style","borderRight","onSelect","Status","badge","color","status","toUpperCase","borderRadius","fontSize","padding","lineHeight","verticalAlign","RPC_STATUS_TO_CODE","CodeHighlight","props","codeRef","hljs","current","ref","EndpointCase","detail","params","Object","request","skey","required","comment","getRefType","JSON","stringify","body","renderJSONObject","raw","ind","nind","refVal","refNested","nested","length","nref","reduce","item","join","response","isOK","href","borderColor","position","top","right","cursor","el","document","createElement","setAttribute","left","appendChild","selection","getSelection","currentRanges","i","rangeCount","getRangeAt","select","execCommand","removeChild","removeAllRanges","forEach","range","addRange","copyToClipboard","toString","message","success","LinkOutlined","method","background","margin","meta_type","ev","enum","Endpoint","some","marginBottom","cases","direction","EndpointAll","isEmpty","nodes","TreeNode","descr","keys","showLine","defaultExpandAll","AppLayout","minHeight","fetchedEndpoint","App","rev","forceUpdate","list","loaded","cache","fetch","then","json","fetchSitemap","AppReady","v","handle","deps","initialState","URLSearchParams","get","setState","pid","setTimeout","includes","clearTimeout","useHistory","addEventListener","removeEventListener","firstScroll","elem","querySelector","decodeURIComponent","requestAnimationFrame","scrollIntoView","behavior","useAutoScroll","Provider","Loading","display","alignItems","justifyContent","size","Boolean","hostname","globalThis","GODRAFT_CONFIG","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","console"],"mappings":"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","file":"static/js/main.18996c89.chunk.js","sourcesContent":["import { createContext, useContext } from 'react';\nimport { AppStore } from '../typings';\n\nexport const Store = createContext({} as AppStore);\n\nexport function useAppStore() {\n\treturn useContext(Store);\n}\n\nexport function useAppState() {\n\treturn useAppStore().state;\n}\n","import * as React from 'react';\nimport { ProjectEntry, Project, SchemeCase } from './typings';\nimport { MatchResult, match as fuzzyMatch } from 'fuzzy';\nimport { useAppStore } from './store/store';\n\nexport function getProjectEntryKey(entry: ProjectEntry) {\n\tlet key = entry.name;\n\t\n\tif (entry.scheme && entry.scheme.project) {\n\t\tkey = `${entry.scheme.project}${key}`;\n\t}\n\n\treturn key;\n}\n\nexport function copyToClipboard(val: string) {\n\tconst el = document.createElement('textarea');\n\tel.value = val;\n\tel.setAttribute('readonly', '');\n\tel.style.position = 'absolute';\n\tel.style.left = '-9999px';\n\t\n\tdocument.body.appendChild(el);\n\n\tconst selection = document.getSelection()\n\tconst currentRanges = [] as Range[];\n\n\tif (selection) {\n\t\tfor (let i = 0; i < (selection.rangeCount || 0); i++) {\n\t\t\tcurrentRanges.push(selection.getRangeAt(i));\n\t\t}\n\t}\n\n\tel.select();\n\tdocument.execCommand('copy');\n\tdocument.body.removeChild(el);\n\t\n\tif (currentRanges.length) { \n\t\tconst selection = document.getSelection()\n\t\tif (selection) {\n\t\t\tselection.removeAllRanges();\n\t\t\tcurrentRanges.forEach(range => {\n\t\t\t\tselection.addRange(range);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function useNav() {\n\tconst { updateState } = useAppStore();\n\tconst nav = React.useCallback((val) => {\n\t\tupdateState('search', '');\n\t\twindow.location.hash = val;\n\t}, [updateState]);\n\t\n\treturn nav;\n}\n\nconst fuzzyMemo = {} as {\n\t[value:string]: {\n\t\t[pattern:string]: MatchResult;\n\t}\n};\n\nexport function fuzzyHL(value: string, pattern: string) {\n\tif (fuzzyMemo[value] === void 0) {\n\t\tfuzzyMemo[value] = {};\n\t}\n\n\tif (fuzzyMemo[value][pattern] === void 0) {\n\t\tfuzzyMemo[value][pattern] = fuzzyMatch(pattern, value, {\n\t\t\tpre: '<span style=\"background: yellow;\">',\n\t\t\tpost: '</span>',\n\t\t});\n\t}\n\n\tconst result = fuzzyMemo[value][pattern];\n\treturn result ? <span dangerouslySetInnerHTML={{__html: result.rendered}}/> : null;\n}\n\nexport function getBaseURL(project: Project, entry?: ProjectEntry) {\n\treturn `#${project.id}${entry ? `:${entry.scheme?.project || ''}${entry.name}` : ``}`;\n}\n\nexport function getCaseURL(project: Project, entry: ProjectEntry, c: SchemeCase) {\n\treturn `${getBaseURL(project, entry)}?case=${c.name}`;\n}\n\nexport function parseHistoryParams(sitemap: Project[]) {\n\tconst [\n\t\t_,\n\t\tid,\n\t\tendpoint,\n\t\tqueryString,\n\t] = window.location.hash.match(/^#?([\\w-]+)(?::([^?]+))?(?:\\?(.*))?/i) || [];\n\n\treturn {\n\t\tactiveProject: sitemap.find((p) => p.id === id) || sitemap[0],\n\t\tactiveEndpoint: endpoint || '',\n\t\tqueryString: queryString || '',\n\t};\n}\n","import * as React from 'react';\nimport { Layout, Menu, Input } from 'antd';\nimport { useAppStore } from '../../store/store';\nimport { useNav, getBaseURL } from '../../util';\n\nexport function Header() {\n\tconst {\n\t\tstate: {\n\t\t\tsearch,\n\t\t\tactiveProject,\n\t\t\tsitemap,\n\t\t},\n\t\tupdateState,\n\t} = useAppStore();\n\tconst handleSearch = React.useCallback((evt: React.ChangeEvent<HTMLInputElement>) => {\n\t\tupdateState('search', evt.target.value);\n\t}, [search]);\n\tconst nav = useNav();\n\n\treturn (\n\t\t<Layout.Header className=\"header\">\n\t\t\t<Layout>\n\t\t\t\t<Layout.Sider width={150}>\n\t\t\t\t\t<Logo/>\n\t\t\t\t</Layout.Sider>\n\t\t\t\t\n\t\t\t\t<Layout.Content>\n\t\t\t\t\t<Menu\n\t\t\t\t\t\ttheme=\"dark\"\n\t\t\t\t\t\tmode=\"horizontal\"\n\t\t\t\t\t\tdefaultSelectedKeys={activeProject && [activeProject.id]}\n\t\t\t\t\t>{\n\t\t\t\t\t\tsitemap.map((project) => (\n\t\t\t\t\t\t\t<Menu.Item\n\t\t\t\t\t\t\t\tkey={project.id}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tnav(getBaseURL(project));\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{project.name}\n\t\t\t\t\t\t\t</Menu.Item>\n\t\t\t\t\t\t))\n\t\t\t\t\t}</Menu>\n\t\t\t\t</Layout.Content>\n\n\t\t\t\t<Layout.Sider width={200}>\n\t\t\t\t\t<Input.Search\n\t\t\t\t\t\tplaceholder=\"Поиск по методам\"\n\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\t/>\n\t\t\t\t</Layout.Sider>\n\t\t\t</Layout>\n\t\t</Layout.Header>\n\t);\n}\n\nfunction Logo() {\n\treturn (\n\t\t<img\n\t\t\theight=\"32\"\n\t\t\tsrc=\"https://img.imgsmail.ru/pm/1.0.3/blocks/ph-logo/img/logotype-mail.ru@2x.png\"\n\t\t/>\n\t);\n}\n","import * as React from 'react';\nimport { Menu, Divider } from 'antd';\nimport { SelectParam } from 'antd/lib/menu';\nimport { useAppStore } from '../../store/store';\nimport { getProjectEntryKey } from '../../util';\n\nexport function LeftMenu() {\n\tconst {\n\t\tstate: {\n\t\t\tactiveProject,\n\t\t\tactiveEndpoint,\n\t\t},\n\t\tupdateState,\n\t} = useAppStore();\n\tconst handleSelect = React.useCallback((param: SelectParam) => {\n\t\tupdateState('activeEndpoint', param.key);\n\t}, [updateState]);\n\n\tconst rootEntries = activeProject?.entries.flatMap(r => r.entries) || [];\n\tconst openKeys = [] as string[];\n\t\n\tconst menuItems = rootEntries.map(function render(e) {\n\t\tif (e.type === 'G') {\n\t\t\topenKeys.push(e.name);\n\t\t\treturn (\n\t\t\t\t<Menu.SubMenu key={e.name} title={e.name}>\n\t\t\t\t\t{e.entries.map(render)}\n\t\t\t\t</Menu.SubMenu>\n\t\t\t);\n\t\t} else if (e.type === 'E') {\n\t\t\treturn (\n\t\t\t\t<Menu.Item\n\t\t\t\t\tkey={getProjectEntryKey(e)}\n\t\t\t\t\ttitle={e.scheme!.description || e.scheme!.name}\n\t\t\t\t>\n\t\t\t\t\t{e.scheme!.name}\n\t\t\t\t</Menu.Item>\n\t\t\t);\n\t\t} else if (e.type === 'HR') {\n\t\t\treturn <Divider />;\n\t\t} else {\n\t\t\tthrow `not supproted: ${e.type}`;\n\t\t}\n\t});\n\n\treturn (\n\t\t<Menu\n\t\t\tmode=\"inline\"\n\t\t\tdefaultOpenKeys={openKeys}\n\t\t\tdefaultSelectedKeys={[activeEndpoint]}\n\t\t\tstyle={{ height: '100%', borderRight: 0 }}\n\t\t\tonSelect={handleSelect}\n\t\t>\n\t\t\t{menuItems}\n\t\t</Menu>\n\t);\n}\n","import * as React from 'react';\nimport { Tag } from 'antd';\n\nexport type StatusProps = {\n\tname: string;\n\tbadge?: boolean;\n};\n\nexport function Status({name, badge}: StatusProps) {\n\tconst color = name === 'ok' ? 'success' : 'error';\n\tconst status = name.toUpperCase();\n\tconst style = badge ? {\n\t\tborderRadius: 5,\n\t\tfontSize: '50%',\n\t\tpadding: '0 4px',\n    \tlineHeight: '14px',\n    \tverticalAlign: 'super',\n\t} : void 0;\n\n\treturn <Tag color={color} style={style}>{status}</Tag>;\n}\n","export const RPC_STATUS_TO_CODE: {\n\t[status:string]: number;\n} = {\n\t'processing': 102,\n\t'ok': 200,\n\t'accepted': 202,\n\t'non_authoritative': 203,\n\t'partial': 206,\n\t'move': 301,\n\t'notmodified': 304,\n\t'invalid': 400,\n\t'payment_required': 402,\n\t'denied': 403,\n\t'notfound': 404,\n\t'unacceptable': 406,\n\t'timeout': 408,\n\t'conflict': 409,\n\t'expectation_failed': 417,\n\t'unprocessable': 422,\n\t'locked': 423,\n\t'failed_dependency': 424,\n\t'upgrade_required': 426,\n\t'many_requests': 429,\n\t'retry_with': 449,\n\t'unavailable_for_legal_reasons': 451,\n\t'fail': 500,\n\t'not_implemented': 501,\n\t'unavaliable': 503,\n\t'insufficient': 507,\n};\n","import * as React from 'react';\nimport * as hljs from 'highlight.js';\nimport 'highlight.js/styles/tomorrow.css';\n\n// hljs.registerLanguage('js', jsLang);\n\nexport type CodeHighlightProps = {\n\tvalue: string;\n}\n\nexport function CodeHighlight(props: CodeHighlightProps) {\n\tconst codeRef = React.useRef(null as HTMLElement | null);\n\tconst {\n\t\tvalue,\n\t} = props;\n\n\tReact.useEffect(() => {\n\t\thljs.highlightBlock(codeRef.current as any);\n\t}, [value]);\n\n\treturn (\n\t\t<pre>\n\t\t\t<code\n\t\t\t\tref={codeRef}\n\t\t\t\tclassName=\"javascript\"\n\t\t\t\tdangerouslySetInnerHTML={{__html: value}}\n\t\t\t/>\n\t\t</pre>\n\t);\n}\n","import * as React from 'react';\nimport { Tag, Card, message, Divider } from 'antd';\nimport { LinkOutlined } from '@ant-design/icons';\nimport { Status } from '../Status/Status';\nimport { getCaseURL, copyToClipboard, useNav } from '../../util';\nimport { RPC_STATUS_TO_CODE } from '../../rpc';\nimport { Project, ProjectEntry, SchemeCase, ReflectItemMap, ReflectItem } from '../../typings';\nimport { CodeHighlight } from '../CodeHighlight/CodeHighlight';\n\nexport type EndpointCaseProps = {\n\tproject: Project;\n\tentry: ProjectEntry;\n\tvalue: SchemeCase;\n}\n\nexport function EndpointCase(props: EndpointCaseProps) {\n\tconst {\n\t\tproject,\n\t\tentry,\n\t\tvalue,\n\t} = props;\n\tconst nav = useNav();\n\tconst scheme = entry.scheme!;\n\tconst detail = scheme.detail[value.status];\n\tconst params = Object.entries(value.params).map(([key, value]) => {\n\t\tconst ref = detail.request.params[key];\n\t\tconst skey = `${key}${ref.required ? '' : '?'}`;\n\n\t\treturn (\n\t\t\t<div key={key}>\n\t\t\t\t<div>/* {ref.comment}. <b>{getRefType(ref)}</b> */</div>\n\t\t\t\t<b>{skey}</b>={typeof value === 'boolean' ? JSON.stringify(value) : value}\n\t\t\t</div>\n\t\t);\n\t});\n\tconst body = renderJSONObject(detail.response.body, value.body, '  ');\n\tconst isOK = value.status === 'ok';\n\tconst href = getCaseURL(project, entry, value);\n\n\treturn (\n\t\t<Card\n\t\t\tstyle={isOK ? {} : {borderColor: '#ffa39e'}}\n\t\t\ttitle={<>\n\t\t\t\t<div id={href} style={{\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\ttop: -20,\n\t\t\t\t}}></div>\n\t\t\t\t<span\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\tright: 20,\n\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t}}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tnav(href);\n\t\t\t\t\t\tcopyToClipboard(window.location.toString());\n\t\t\t\t\t\tmessage.success('Copied', .4);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<LinkOutlined/>\n\t\t\t\t</span>\n\t\t\t\t<a href={href}>{value.name}</a><br/>\n\t\t\t\t<Status name={value.status}/>\n\t\t\t\t<Tag>{value.method}</Tag>\n\t\t\t\t<span> → &nbsp;{entry.name}</span>\n\t\t\t</>}\n\t\t>\n\t\t\t{value.description && <>\n\t\t\t\t<div>{value.description}</div>\n\t\t\t\t<Divider/>\n\t\t\t</>}\n\t\t\t<div style={{background: '#fafafa', margin: -24, padding: 24}}>\n\t\t\t\t{params}\n\t\t\t</div>\n\t\t\t<br/>\n\t\t\t<br/>\n\t\t\t<div>\n\t\t\t\t<CodeHighlight value={'{\\n'\n\t\t\t\t\t+ `  \"status\": ${RPC_STATUS_TO_CODE[value.status]},\\n`\n\t\t\t\t\t+ `  \"body\": ${body}\\n}`\n\t\t\t\t}/>\n\t\t\t</div>\n\t\t</Card>\n\t);\n}\n\n\n\nfunction renderJSONObject(ref: ReflectItemMap, raw: any, ind = '') {\n\tif (raw == null || typeof raw !== 'object') {\n\t\treturn JSON.stringify(raw);\n\t}\n\tconst nind = ind + '  ';\n\n\treturn `{\\n${Object.entries(raw).map(([key, val]) => {\n\t\tconst refVal = ref[key];\n\t\tconst refNested = refVal && refVal.nested;\n\n\t\tif (refNested && refNested.length) {\n\t\t\tconst nref = refNested.reduce((map, item) => {\n\t\t\t\tmap[item.name] = item;\n\t\t\t\treturn map;\n\t\t\t}, {} as ReflectItemMap);\n\t\t\tval = renderJSONObject(nref, val, ind + ind);\n\t\t} else {\n\t\t\tval = JSON.stringify(val);\n\t\t}\n\n\t\treturn [\n\t\t\t`${nind}/* ${refVal.comment}. <b>${getRefType(refVal)}</b> */`,\n\t\t\t`${nind}\"${key}\": ${val}`,\n\t\t].join('\\n');\n\t}).join(',\\n')}\\n${ind}}`;\n}\n\nfunction getRefType({type, meta_type, enum:ev}: ReflectItem) {\n\tswitch (type) {\n\t\tcase 'struct':\n\t\t\treturn 'object';\n\n\t\tcase 'slice':\n\t\t\treturn `${ev ? `Enum<${ ev.join(' | ') }>` : meta_type}[]`;\n\t}\n\n\treturn type;\n}\n","import * as React from 'react';\nimport { Card, Result, Tree, Breadcrumb, Typography, Space } from 'antd';\nimport { useAppStore } from '../../store/store';\nimport { ProjectEntry } from '../../typings';\nimport { Status } from '../Status/Status';\nimport { EndpointCase } from './EndpointCase';\nimport { getProjectEntryKey, getCaseURL } from '../../util';\nimport Paragraph from 'antd/lib/typography/Paragraph';\n\nexport type Endpoint = {\n\tid: string;\n};\n\nexport function Endpoint({id}: Endpoint) {\n\tconst {\n\t\tstate: {activeProject},\n\t} = useAppStore();\n\tconst entry = React.useMemo(() => {\n\t\tlet result = null as ProjectEntry | null;\n\t\tactiveProject && activeProject.entries.some(function find(e) {\n\t\t\tif (getProjectEntryKey(e) === id) {\n\t\t\t\tresult = e;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn e.entries.some(find);\n\t\t});\n\t\treturn result;\n\t}, [activeProject, id]);\n\n\tif (!entry) {\n\t\treturn <Result\n\t\t\tstatus=\"error\"\n\t\t\ttitle={`Ошибка: «${id}» — не найден`}\n\t\t/>;\n\t}\n\n\tconst scheme = entry.scheme!;\n\n\treturn (\n\t\t<>\n\t\t\t<Breadcrumb style={{marginBottom: 20}}>\n\t\t\t\t<Breadcrumb.Item>{activeProject?.name}</Breadcrumb.Item>\n\t\t\t\t{scheme.project && <Breadcrumb.Item>{scheme.project}</Breadcrumb.Item>}\n\t\t\t\t<Breadcrumb.Item>{scheme.name}</Breadcrumb.Item>\n\t\t\t</Breadcrumb>\n\n\t\t\t{scheme.description && <Typography style={{fontSize: '120%'}}>\n\t\t\t\t<Paragraph>{scheme.description}</Paragraph>\n\t\t\t</Typography>}\n\n\t\t\t{scheme.cases.length > 1 && <ul>\n\t\t\t\t{scheme.cases.map((c, i) => (\n\t\t\t\t\t<li key={i}>\n\t\t\t\t\t\t<a href={getCaseURL(activeProject!, entry, c)}>{c.name}</a>&nbsp;\n\t\t\t\t\t\t<Status name={c.status} badge/> \n\t\t\t\t\t</li>\n\t\t\t\t))}\n\t\t\t</ul>}\n\t\t\t\n\t\t\t<Space direction=\"vertical\" style={{width: '100%'}}>\n\t\t\t\t{scheme.cases.map((c, i) => (\n\t\t\t\t\t<EndpointCase key={i} project={activeProject!} entry={entry} value={c}/>\n\t\t\t\t))}\n\t\t\t</Space>\n\t\t</>\n\t);\n}\n","import * as React from 'react';\nimport { Card, Result, Tree } from 'antd';\nimport { useAppStore } from '../../store/store';\nimport { fuzzyHL, getBaseURL, useNav } from '../../util';\n\nexport function EndpointAll() {\n\tconst {\n\t\tstate: {\n\t\t\tsearch,\n\t\t\tactiveProject,\n\t\t},\n\t} = useAppStore();\n\tconst rootEntries = activeProject?.entries.flatMap(e => e.entries) || [];\n\t\n\tlet isEmpty = true;\n\tconst nodes = rootEntries.map(function render(e) {\n\t\tif (e.type === 'G') {\n\t\t\treturn (\n\t\t\t\t<Tree.TreeNode key={e.name} title={e.name}>\n\t\t\t\t\t{e.entries.map(render)}\n\t\t\t\t</Tree.TreeNode>\n\t\t\t);\n\t\t} else if (e.type === 'E') {\n\t\t\tconst name = fuzzyHL(e.name, search);\n\t\t\tconst descr = fuzzyHL(e.scheme!.name, search);\n\n\t\t\tif (name === null && descr === null) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tisEmpty = false;\n\n\t\t\treturn (\n\t\t\t\t<Tree.TreeNode\n\t\t\t\t\tkey={getBaseURL(activeProject!, e)}\n\t\t\t\t\ttitle={<>\n\t\t\t\t\t\t<a>{name || e.name}</a>\n\t\t\t\t\t\t<span> — {descr || e.scheme!.name}</span>\n\t\t\t\t\t</>}\n\t\t\t\t/>\n\t\t\t);\n\t\t} else {\n\t\t\tthrow `not supproted: ${e.type}`;\n\t\t}\n\t});\n\tconst nav = useNav();\n\tconst handleSelect = React.useCallback((keys: React.ReactText[]) => {\n\t\tnav(keys.join(''));\n\t}, []);\n\n\treturn (\n\t\t<Card title=\"Все методы\">\n\t\t\t{isEmpty\n\t\t\t\t? <Result\n\t\t\t\t\tstatus=\"info\"\n\t\t\t\t\ttitle={<>По запросу «<b>{search}</b>» ничего не найдено</>}\n\t\t\t\t/>\n\t\t\t\t: <Tree\n\t\t\t\t\tshowLine\n\t\t\t\t\tonSelect={handleSelect}\n\t\t\t\t\tdefaultExpandAll={true}\n\t\t\t\t>\n\t\t\t\t\t{nodes}\n\t\t\t\t</Tree>}\n\t\t</Card>\n\t);\n}\n","import * as React from 'react';\nimport { Layout } from 'antd';\nimport { Header } from './Header';\nimport { LeftMenu } from './LeftMenu';\nimport { Endpoint } from '../Endpoint/Endpoint';\nimport { EndpointAll } from '../Endpoint/EndpointAll';\nimport { useAppStore } from '../../store/store';\n\nexport function AppLayout() {\n\tconst {\n\t\tstate: {\n\t\t\tsearch,\n\t\t\tactiveProject,\n\t\t\tactiveEndpoint,\n\t\t},\n\t} = useAppStore();\n\n\treturn (\n\t\t<Layout style={{height: '100%'}}>\n\t\t\t<Header/>\t\n\n\t\t\t<Layout>\n\t\t\t\t<Layout.Sider className=\"site-layout-background\">\n\t\t\t\t\t<LeftMenu/>\n\t\t\t\t</Layout.Sider>\n\n\t\t\t\t<Layout.Content\n\t\t\t\t\tclassName=\"site-layout-background\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmargin: 20,\n\t\t\t\t\t\tminHeight: 280,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{!search && activeEndpoint\n\t\t\t\t\t\t? <Endpoint id={activeEndpoint}/>\n\t\t\t\t\t\t: <EndpointAll />\n\t\t\t\t\t}\n\t\t\t\t</Layout.Content>\n\t\t\t</Layout>\n\t\t</Layout>\n\t);\n}\n","import * as React from 'react';\n\nimport { AppSitemap, AppState, ProjectEntry, Project } from './typings';\n\nimport { Result, Spin } from 'antd';\nimport { AppLayout } from './ui/Layout/Layout';\nimport { parseHistoryParams, useNav } from './util';\nimport { Store } from './store/store';\n\nexport type AppLoaderProps = {\n\tactiveProject?: string;\n\tsitemap?: Array<Project & {\n\t\tentries: Array<ProjectEntry | string>;\n\t}>;\n};\n\nconst fetchedEndpoint = {} as {\n\t[url:string]: ProjectEntry | null;\n};\n\nexport function App(props: AppLoaderProps) {\n\tconst [rev, updateState] = React.useState(0);\n\tconst forceUpdate = React.useCallback(() => { updateState(rev + 1); }, [rev]);\n\n\tif (!props.sitemap) {\n\t\treturn <Result status=\"error\" title=\"Sitemap not defined\"/>;\n\t}\n\n\tconst sitemap = fetchSitemap(props.sitemap, forceUpdate);\n\n\treturn (\n\t\t<AppReady\n\t\t\tkey={rev}\n\t\t\tactiveProject={sitemap.find(v => v.id === props.activeProject)}\n\t\t\tsitemap={sitemap}\n\t\t/>\n\t);\n}\n\nfunction AppReady(props: {activeProject?: Project, sitemap: AppSitemap}) {\n\tconst {\n\t\tsitemap,\n\t\tactiveProject,\n\t } = props;\n\tconst initialState = React.useMemo((): AppState => {\n\t\tconst state = {\n\t\t\tsearch: '',\n\t\t\tactiveProject,\n\t\t\tactiveEndpoint: '',\n\t\t\tsitemap,\n\t\t\t...parseHistoryParams(sitemap),\n\t\t};\n\t\tstate.search = new URLSearchParams(state.queryString).get('search') || '';\n\t\treturn state;\n\t}, []);\n\tconst [state, setState] = React.useState(initialState);\n\n\tuseHistory(state);\n\tuseHashChange(() => {\n\t\tsetState({\n\t\t\t...state,\n\t\t\t...parseHistoryParams(sitemap),\n\t\t});\n\t}, [state, sitemap]);\n\tuseAutoScroll();\n\t\n\treturn (\n\t\t<Store.Provider value={{\n\t\t\tstate,\n\t\t\tupdateState: (key, value) => {\n\t\t\t\tsetState({\n\t\t\t\t\t...state,\n\t\t\t\t\t[key]: value,\n\t\t\t\t});\n\t\t\t},\n\t\t}}>\n\t\t\t{sitemap.length ? <AppLayout/> : <Loading/>}\n\t\t</Store.Provider>\n\t);\n}\n\nfunction Loading() {\n\treturn (\n\t\t<div style={{\n\t\t\tdisplay: 'flex',\n\t\t\twidth: '100%',\n\t\t\theight: '100%',\n\t\t\talignItems: 'center',\n\t\t\tjustifyContent: 'center',\n\t\t}}>\n\t\t\t<Spin size=\"large\"/>\n\t\t</div>\n\t);\n}\n\nfunction useHistory(state: AppState) {\n\tReact.useEffect(() => {\n\t\tconst {\n\t\t\tactiveProject,\n\t\t\tactiveEndpoint,\n\t\t\tqueryString,\n\t\t\tsearch,\n\t\t} = state\n\n\t\tconst pid = setTimeout(() => {\n\t\t\tlet hash = activeProject ? activeProject.id : '';\n\t\t\tlet title = activeProject?.name\n\t\t\t\n\t\t\tif (activeEndpoint) {\n\t\t\t\thash += `:${activeEndpoint}`;\n\t\t\t\ttitle += activeEndpoint;\n\t\t\t}\n\n\t\t\tif (search) {\n\t\t\t\thash += `?search=${search}`;\n\t\t\t} else if (queryString && !queryString.includes('search=')) {\n\t\t\t\thash += `?${queryString}`;\n\t\t\t}\n\t\t\t\n\t\t\twindow.location.hash = hash;\n\t\t\tif (title) {\n\t\t\t\twindow.document.title = title!;\n\t\t\t}\n\t\t}, 250);\n\t\treturn () => {\n\t\t\tclearTimeout(pid);\n\t\t};\n\t}, [window.location.hash, state]);\n\n}\n\nfunction useHashChange(handle: () => void, deps: any[]) {\n\tReact.useEffect(() => {\n\t\twindow.addEventListener('hashchange', handle);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('hashchange', handle);\n\t\t};\n\t}, deps);\n\n}\n\nfunction useAutoScroll() {\n\tconst firstScroll = React.useRef(true);\n\tReact.useEffect(() => {\n\t\tconst elem = document.querySelector(`[id=\"${decodeURIComponent(window.location.hash)}\"]`);\n\t\trequestAnimationFrame(() => {\n\t\t\telem && elem.scrollIntoView({behavior: firstScroll.current ? 'auto' : 'smooth'});\n\t\t\tfirstScroll.current = false;\n\t\t});\n\t}, [window.location.hash]);\n}\n\nfunction fetchSitemap(sitemap: AppSitemap, forceUpdate: () => void) {\n\treturn sitemap.reduce((list, item) => {\n\t\tconst entries = [] as ProjectEntry[];\n\t\tlet loaded = true;\n\n\t\titem.entries.forEach((e) => {\n\t\t\tif (typeof e === 'string') {\n\t\t\t\tconst cache = fetchedEndpoint[e];\n\t\t\t\t\n\t\t\t\tif (cache === void 0) {\n\t\t\t\t\tloaded = false;\n\t\t\t\t\tfetchedEndpoint[e] = null;\n\t\t\t\t\tfetch(e).then(r => r.json()).then(json => {\n\t\t\t\t\t\tfetchedEndpoint[e] = json;\n\t\t\t\t\t\tforceUpdate();\n\t\t\t\t\t});\n\t\t\t\t} else if (cache === null) {\n\t\t\t\t\tloaded = false;\n\t\t\t\t} else {\n\t\t\t\t\tentries.push(cache);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tentries.push(e);\n\t\t\t}\n\t\t});\n\n\t\tif (loaded) {\n\t\t\tlist.push({\n\t\t\t\t...item,\n\t\t\t\tentries,\n\t\t\t});\n\t\t}\n\n\t\treturn list;\n\t}, [] as Project[])\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import * as React from 'react';\nimport { render } from 'react-dom';\nimport { App }  from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'antd/dist/antd.css';\n\nrender(\n\t<App {...Object((globalThis as any).GODRAFT_CONFIG)} />,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}