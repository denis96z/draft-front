(this["webpackJsonpgodraft-front"]=this["webpackJsonpgodraft-front"]||[]).push([[0],{187:function(e,t,n){e.exports=n(541)},476:function(e,t,n){},541:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(4),c=n(84),o=n(25),l=n(75),i=n(553),u=n(543),s=n(127),m=n(552),d=Object(a.createContext)({});function p(){return Object(a.useContext)(d)}function f(){return p().state}var v=n(163);function h(e){var t=e.name;return e.scheme&&e.scheme.project&&(t="".concat(e.scheme.project).concat(t)),t}function E(){var e=p().updateState;return a.useCallback((function(t){e({search:"",queryString:""}),window.location.hash=t}),[e])}var g={};function y(e,t){void 0===g[e]&&(g[e]={}),void 0===g[e][t]&&(g[e][t]=Object(v.match)(t,e,{pre:'<span style="background: yellow;">',post:"</span>"}));var n=g[e][t];return n?a.createElement("span",{dangerouslySetInnerHTML:{__html:n.rendered}}):null}function b(e,t){var n;return"#".concat(e.id).concat(t?":".concat((null===(n=t.scheme)||void 0===n?void 0:n.project)||"").concat(t.name):"")}function j(e,t,n){return"".concat(b(e,t),"?case=").concat(n.name)}function w(e){var t=window.location.hash.match(/^#?([\w-]+)(?::([^?]+))?(?:\?(.*))?/i)||[],n=Object(o.a)(t,4),a=(n[0],n[1]),r=n[2],c=n[3];return{activeGroup:e.groups[a]?a:Object.keys(e.groups)[0],activeEndpoint:r||"",queryString:c||""}}function k(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})}function S(){var e=p(),t=e.state,n=t.search,r=t.activeGroup,c=t.groups,o=e.updateState,l=a.useCallback((function(e){o("search",e.target.value)}),[o]),i=E();return a.createElement(u.a.Header,{className:"header"},a.createElement(u.a,null,a.createElement(u.a.Sider,{width:150},a.createElement(O,null)),a.createElement(u.a.Content,null,a.createElement(s.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:r?[r]:void 0},Object.values(c).map((function(e){return a.createElement(s.a.Item,{key:e.id,onClick:function(){i(b(e))}},e.name)})))),a.createElement(u.a.Sider,{width:200},a.createElement(m.a.Search,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043c\u0435\u0442\u043e\u0434\u0430\u043c",value:n,onChange:l}))))}function O(){return a.createElement("img",{height:"32",src:"https://img.imgsmail.ru/pm/1.0.3/blocks/ph-logo/img/logotype-mail.ru@2x.png"})}var C=n(544);function _(){var e=p(),t=e.state,n=t.activeGroupEntries,r=t.activeEndpoint,c=e.updateState,o=a.useCallback((function(e){c({search:"",queryString:"",activeEndpoint:e.key})}),[c]),l=n.flatMap((function(e){return e.entries}))||[],i=[],u=l.map((function e(t,n){if("G"===t.type)return i.push("group-".concat(n)),a.createElement(s.a.SubMenu,{key:"group-".concat(n),title:t.name},t.entries.map(e));if("E"===t.type)return a.createElement(s.a.Item,{key:h(t),title:t.scheme.description||t.scheme.name},t.scheme.name);if("HR"===t.type)return a.createElement(C.a,null);throw"not supproted: ".concat(t.type)}));return a.createElement(s.a,{mode:"inline",defaultOpenKeys:i,defaultSelectedKeys:r?[r]:void 0,style:{height:"100%",borderRight:0},onSelect:o},u)}var N=n(545);function x(){return a.createElement("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"}},a.createElement(N.a,{size:"large"}))}var q=n(554),G=n(548),I=n(546),R=n(555);function F(e){var t=e.name,n=e.badge,r="ok"===t?"success":"error",c=t.toUpperCase(),o=n?{borderRadius:5,fontSize:"50%",padding:"0 4px",lineHeight:"14px",verticalAlign:"super"}:void 0;return a.createElement(R.a,{color:r,style:o},c)}var T=n(169),M=n.n(T),A=n(547),H=n(550),B=n(556),L=n(549),J={processing:102,ok:200,accepted:202,non_authoritative:203,partial:206,move:301,notmodified:304,invalid:400,payment_required:402,denied:403,notfound:404,unacceptable:406,timeout:408,conflict:409,expectation_failed:417,unprocessable:422,locked:423,failed_dependency:424,upgrade_required:426,many_requests:429,retry_with:449,unavailable_for_legal_reasons:451,fail:500,not_implemented:501,unavaliable:503,insufficient:507},z=n(170);n(475);function K(e){var t=a.useRef(null),n=e.value;return a.useEffect((function(){z.highlightBlock(t.current)}),[n]),a.createElement("pre",null,a.createElement("code",{ref:t,className:"javascript",dangerouslySetInnerHTML:{__html:n}}))}n(476);function U(e){var t,n=e.group,r=e.entry,c=e.value,l=p().state.accessRights,i=r.scheme,u=a.useState(null===(t=l[c.access])||void 0===t?void 0:t.extra[0]),s=Object(o.a)(u,2),m=s[0],d=s[1],f=E(),v=i.detail[c.status],h=function(e){if(!e||null===e.value)return null;return e.reflect.nested.map((function(t){return V(t.name,e.value[t.name],t,": ")}))}(null===m||void 0===m?void 0:m.headers),g=function(e,t,n){var a=Object.entries(Object(e)).map((function(e){var n=Object(o.a)(e,2),a=n[0];return V(a,n[1],t[a])}));return n?n.reflect.nested.map((function(e){return V(e.name,n.value[e.name],e)})).concat(a):a}(c.params,v.request.params,null===m||void 0===m?void 0:m.params),y=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(null==n||"object"!==typeof n)return JSON.stringify(n);var r=a+"  ";return"{\n".concat(Object.entries(n).map((function(n){var c=Object(o.a)(n,2),l=c[0],i=c[1],u=t[l],s=u&&u.nested;if(s&&s.length){var m=s.reduce((function(e,t){return e[t.name]=t,e}),{});i=e(m,i,a+a)}else i=JSON.stringify(i);return["".concat(r,"/* ").concat(u.comment,". <b>").concat(P(u),"</b> */"),"".concat(r,'"').concat(l,'": ').concat(i)].join("\n")})).join(",\n"),"\n").concat(a,"}")}(v.response.body,c.body,"  "),b="ok"===c.status,w=j(n,r,c);return a.createElement(A.a,{style:b?{}:{borderColor:"#ffa39e"},title:a.createElement(a.Fragment,null,a.createElement("div",{id:w,className:"endpoint-case-hidden-anchor"}),a.createElement("span",{className:"endpoint-case-copy-to-clipboard",onClick:function(){f(w),function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly",""),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t);var n=document.getSelection(),a=[];if(n)for(var r=0;r<(n.rangeCount||0);r++)a.push(n.getRangeAt(r));if(t.select(),document.execCommand("copy"),document.body.removeChild(t),a.length){var c=document.getSelection();c&&(c.removeAllRanges(),a.forEach((function(e){c.addRange(e)})))}}(window.location.toString()),H.a.success("Copied",.4)}},a.createElement(L.a,null)),a.createElement("a",{href:w},c.name),a.createElement("br",null),a.createElement(F,{name:c.status}),a.createElement(R.a,null,c.method),a.createElement("span",null," \u2192 \xa0",a.createElement($,{value:r})))},c.description&&a.createElement(Q,{value:c.description}),h&&a.createElement(W,{bg:"#f5f5f5",name:"request \u2192 headers",extra:a.createElement(D,{type:c.access,active:m,onSelect:d})},h),g&&a.createElement(W,{bg:"#fafafa",name:"request \u2192 params",extra:!h&&a.createElement(D,{type:c.access,active:m,onSelect:d})},g),a.createElement(W,{name:"response"},a.createElement(K,{value:"{\n"+'  "status": '.concat(J[c.status],",\n")+'  "body": '.concat(y)+"\n}"})))}function W(e){var t=e.bg,n=e.name,r=e.extra,c=e.children;return a.createElement("div",{className:"request-section",style:{background:t}},r&&a.createElement("div",{className:"request-section-extra"},r),a.createElement("div",{className:"request-section-label"},n),a.createElement("div",{className:"request-section-body"},c))}function D(e){var t=e.type,n=e.active,r=e.onSelect,c=f().accessRights[t];return c?a.createElement("div",{className:"access-selector"},c.extra.map((function(e){return a.createElement("div",{className:"\n\t\t\t\taccess-selector-tab\n\t\t\t\t".concat(e===n&&"access-selector-tab-active","\n\t\t\t"),key:e.name,onClick:function(){return r(e)}},e.name)}))):a.createElement(a.Fragment,null,t)}function P(e){var t=e.type,n=e.meta_type,a=e.enum;switch(t){case"struct":return"object";case"slice":return"".concat(a?"Enum<".concat(a.join(" | "),">"):n,"[]")}return t}function V(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"=",c="".concat(e).concat(n.required?"":"?");return a.createElement("div",{key:e},a.createElement("div",null,"/* ",n.comment,". ",a.createElement("b",null,P(n))," */"),a.createElement("b",null,c),r,"boolean"===typeof t?JSON.stringify(t):t)}function $(e){var t,n=e.value,r=f().projects[null===(t=n.scheme)||void 0===t?void 0:t.project],c=[],l=a.useState(""),i=Object(o.a)(l,2),u=i[0],m=i[1],d=null;if(r)if(r.host&&c.push(r.host),r.host_rc&&c.push(r.host_rc),r.host_dev&&c.push(r.host_dev),u=c.includes(u)?u:c[0],c.length>1){var p=a.createElement(s.a,{onClick:function(e){var t=e.key;m(t)}},c.map((function(e){return a.createElement(s.a.Item,{key:e},e)}))),v=a.createElement(B.a,{overlay:p},a.createElement("span",{className:"endpoint-case-host"},u));d=a.createElement(a.Fragment,null,"https://",v)}else c.length&&(d=a.createElement(a.Fragment,null,"https://",c[0]));return a.createElement("span",null,d,n.name)}function Q(e){var t=e.value,n=null,r=M()(t.replace(/^\s*\n/,"").split("\n").map((function(e){if(null===n){var t=e.match(/^\s+/);n=!!t&&new RegExp("^".concat(t[0]))}return n?e.replace(n,""):e})).join("\n"));return a.createElement("div",{className:"endpoint-case-descr",dangerouslySetInnerHTML:{__html:r}})}var X=n(178),Y=n.n(X);function Z(e){var t=e.id,n=p().state,r=n.groups,c=n.projects,o=n.activeGroup,l=n.activeGroupEntries,u=a.useMemo((function(){var e=null;return l.some((function n(a){return h(a)===t?(e=a,!0):a.entries.some(n)})),e}),[l,t]);if(!u)return a.createElement(i.a,{status:"error",title:a.createElement(a.Fragment,null,"\u041e\u0448\u0438\u0431\u043a\u0430: \xab",a.createElement("b",null,t),"\xbb \u2014 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")});var s=r[o];if(!s)return a.createElement(i.a,{status:"error",title:a.createElement(a.Fragment,null,"\u041e\u0448\u0438\u0431\u043a\u0430: \xab",a.createElement("b",null,o||"<<undefined>>"),"\xbb \u2014 \u0433\u0440\u0443\u043f\u043f\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430")});var m=u.scheme,d=c[m.project];return a.createElement(a.Fragment,null,a.createElement(q.a,{style:{marginBottom:20}},a.createElement(q.a.Item,null,s.name),d&&a.createElement(q.a.Item,null,d.name),a.createElement(q.a.Item,null,m.name)),m.description&&a.createElement(G.a,{style:{fontSize:"120%"}},a.createElement(Y.a,null,m.description)),m.cases.length>1&&a.createElement("ul",null,m.cases.map((function(e,t){return a.createElement("li",{key:t},a.createElement("a",{href:j(s,u,e)},e.name),"\xa0",a.createElement(F,{name:e.status,badge:!0}))}))),a.createElement(I.a,{direction:"vertical",style:{width:"100%"}},m.cases.map((function(e,t){return a.createElement(U,{key:"".concat(s.id,"-").concat(u.name,"-").concat(e.name,"-").concat(t),group:s,entry:u,value:e})}))))}var ee=n(551);function te(){var e=p().state,t=e.search,n=e.groups,r=e.activeGroup,c=e.activeGroupEntries,o=n[r],l=c.flatMap((function(e){return e.entries}))||[],u=!0,s=l.map((function e(n){if("G"===n.type)return a.createElement(ee.a.TreeNode,{key:n.name,title:n.name},n.entries.map(e));if("E"===n.type){var r=y(n.name,t),c=y(n.scheme.name,t);return null===r&&null===c?null:(u=!1,a.createElement(ee.a.TreeNode,{key:b(o,n),title:a.createElement(a.Fragment,null,a.createElement("a",null,r||n.name),a.createElement("span",null," \u2014 ",c||n.scheme.name))}))}throw"not supproted: ".concat(n.type)})),m=E(),d=a.useCallback((function(e){m(e.join(""))}),[]);return a.createElement(A.a,{title:"\u0412\u0441\u0435 \u043c\u0435\u0442\u043e\u0434\u044b"},u?a.createElement(i.a,{status:"info",title:a.createElement(a.Fragment,null,"\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \xab",a.createElement("b",null,t),"\xbb \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")}):a.createElement(ee.a,{showLine:!0,onSelect:d,defaultExpandAll:!0},s))}function ne(){var e=p().state,t=e.loading,n=e.search,r=e.activeEndpoint,c=t?a.createElement(x,null):null;return null===c&&(c=!n&&r?a.createElement(Z,{id:r}):a.createElement(te,null)),a.createElement(u.a,{style:{height:"100%"}},a.createElement(S,null),a.createElement(u.a,null,a.createElement(u.a.Sider,{className:"site-layout-background"},a.createElement(_,null)),a.createElement(u.a.Content,{key:r||n,className:"site-layout-background",style:{margin:20,minHeight:280}},c)))}var ae={};function re(e){var t=e.config,n=a.useMemo((function(){var e={loading:!0,search:"",queryString:"",activeGroup:(null===t||void 0===t?void 0:t.active_group)||null,activeGroupEntries:[],activeEndpoint:null,groups:k((null===t||void 0===t?void 0:t.groups)||[]),projects:k((null===t||void 0===t?void 0:t.projects)||[]),accessRights:k((null===t||void 0===t?void 0:t.rights)||[])};return Object(l.a)({},e,{},w(e))}),[t]);return t&&t.groups&&t.groups.length?a.createElement(ce,{state:n}):(console.warn("Brocked state:",n),a.createElement(i.a,{status:"error",title:"Broken config (no groups)"}))}function ce(e){var t,n,r=a.useState(e.state),i=Object(o.a)(r,2),u=i[0],s=i[1],m={state:u,updateState:a.useCallback((function(){2===arguments.length?s(Object(l.a)({},u,Object(c.a)({},arguments[0],arguments[1]))):s(Object(l.a)({},u,{},Object(arguments[0])))}),[u])};return function(e){a.useEffect((function(){var t=e.groups,n=e.activeGroup,a=e.activeEndpoint,r=e.queryString,c=e.search,o=setTimeout((function(){var e,o=n||"",l=null===(e=t[n])||void 0===e?void 0:e.name;a&&(o+=":".concat(a),l+=a),c?o+="?search=".concat(c):r&&!r.includes("search=")&&(o+="?".concat(r)),window.location.hash=o,l&&(window.document.title=l)}),250);return function(){clearTimeout(o)}}),[window.location.hash,e])}(u),t=function(){s(Object(l.a)({},u,{},w(u)))},n=[u],a.useEffect((function(){return window.addEventListener("hashchange",t),function(){window.removeEventListener("hashchange",t)}}),n),function(e){var t=e.state,n=e.updateState,r=a.useState(0),c=Object(o.a)(r,2),l=c[0],i=c[1],u=a.useCallback((function(){i(l+1)}),[l]),s=t.groups[t.activeGroup];if(!s)return;var m=!1,d=s.entries.map((function(e){var t=ae[e];return void 0===t?(m=!0,ae[e]=null,fetch(e).then((function(e){return e.json()})).then((function(t){ae[e]=t,u()}))):null===t&&(m=!0),t}));m!==t.loading&&n(m?{loading:!0}:{loading:!1,activeGroupEntries:d})}(m),function(e){var t=a.useRef(!0);a.useEffect((function(){if(!e){var n=document.querySelector('[id="'.concat(decodeURIComponent(window.location.hash),'"]'));requestAnimationFrame((function(){n&&n.scrollIntoView({behavior:t.current?"auto":"smooth"}),t.current=!1}))}}),[e,window.location.hash])}(u.loading),a.createElement(d.Provider,{value:m},a.createElement(ne,null))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(540);Object(r.render)(a.createElement(re,{config:Object(globalThis.GODRAFT_CONFIG)}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[187,1,2]]]);
//# sourceMappingURL=main.abb28cc3.chunk.js.map